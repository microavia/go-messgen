// Code generated by go-messgen. DO NOT EDIT.

{{$InternalPrefix := "int_"}}

package {{.Module.Protocol}}

import (
	"testing"
	"github.com/stretchr/testify/require"
)

{{$Module := .}}

{{range $Message := $Module.Messages}}
{{$MessageName := CamelCase $Message.Name}}

func Test{{$MessageName}}Codec(t *testing.T) {
	v := {{$InternalPrefix}}{{$MessageName}}Rand()
	b := make([]byte, 65536)

	n, err := v.Pack(b)
	require.NoError(t, err, "{{$Message.Name}} pack: %v", err)
	require.Equal(t, v.Size(), n, "{{$Message.Name}} pack: actual %d != expected %d", n, v.Size())

	out := &{{$MessageName}}{}

	err = out.Unpack(b[:n])
	require.NoError(t, err, "{{$Message.Name}} unpack: %v", err)
	require.Equal(t, v, *out, "{{$Message.Name}} unpack: %v", err)
}

{{end}}
